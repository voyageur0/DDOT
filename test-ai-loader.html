<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test AI Loader Design</title>
    <link rel="stylesheet" href="/css/modern-ui.css">
    <link rel="stylesheet" href="/css/ai-loader.css">
    <style>
        body {
            background: #f9fafb;
            padding: 2rem;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 4rem;
        }
        
        h2 {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 2rem;
            color: #111827;
        }
        
        .demo-wrapper {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="font-size: 48px; font-weight: 900; margin-bottom: 3rem; background: linear-gradient(135deg, #2563eb, #7c3aed); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            Test du Design AI Loader
        </h1>
        
        <!-- Test 1: Loader en cours -->
        <div class="test-section">
            <h2>1. Animation de chargement (État actif)</h2>
            <div class="demo-wrapper">
                <div class="ai-loader-container">
                    <div class="ai-loader-card">
                        <!-- Particules flottantes -->
                        <div class="ai-particles">
                            <div class="ai-particle" style="left: 10%; animation-delay: 0s;"></div>
                            <div class="ai-particle" style="left: 30%; animation-delay: 2s;"></div>
                            <div class="ai-particle" style="left: 50%; animation-delay: 4s;"></div>
                            <div class="ai-particle" style="left: 70%; animation-delay: 6s;"></div>
                            <div class="ai-particle" style="left: 90%; animation-delay: 8s;"></div>
                        </div>
                        
                        <div class="ai-loader-header">
                            <div class="ai-progress-circle">
                                <svg class="ai-progress-ring" width="100" height="100">
                                    <circle class="ai-progress-ring-bg" r="47" cx="50" cy="50" />
                                    <circle class="ai-progress-ring-fill" r="47" cx="50" cy="50" 
                                            stroke-dasharray="314" stroke-dashoffset="157" />
                                    <defs>
                                        <linearGradient id="aiProgressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" style="stop-color: #2563eb; stop-opacity: 1" />
                                            <stop offset="100%" style="stop-color: #7c3aed; stop-opacity: 1" />
                                        </linearGradient>
                                    </defs>
                                </svg>
                                <div class="ai-progress-percentage">50%</div>
                            </div>
                            <div class="ai-loader-content">
                                <h3 class="ai-loader-title">Analyse IA o3 en cours</h3>
                                <p class="ai-loader-subtitle">Extraction des données RDPPF...</p>
                            </div>
                        </div>
                        
                        <div class="ai-steps-container">
                            <div class="ai-step-item completed" data-step="1">
                                <div class="ai-step-indicator">
                                    <span class="ai-step-number">1</span>
                                    <svg class="ai-step-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                                        <path d="M20 6L9 17L4 12"/>
                                    </svg>
                                </div>
                                <div class="ai-step-content">
                                    <div class="ai-step-title">Extraction PDF RDPPF</div>
                                    <div class="ai-step-description">Analyse du cadastre des restrictions de droit public</div>
                                </div>
                            </div>
                            
                            <div class="ai-step-item active" data-step="2">
                                <div class="ai-step-indicator">
                                    <span class="ai-step-number">2</span>
                                    <svg class="ai-step-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                                        <path d="M20 6L9 17L4 12"/>
                                    </svg>
                                </div>
                                <div class="ai-step-content">
                                    <div class="ai-step-title">Extraction PDF Règlement</div>
                                    <div class="ai-step-description">Analyse du règlement communal de construction</div>
                                </div>
                            </div>
                            
                            <div class="ai-step-item" data-step="3">
                                <div class="ai-step-indicator">
                                    <span class="ai-step-number">3</span>
                                    <svg class="ai-step-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                                        <path d="M20 6L9 17L4 12"/>
                                    </svg>
                                </div>
                                <div class="ai-step-content">
                                    <div class="ai-step-title">Analyse combinée o3</div>
                                    <div class="ai-step-description">Fusion et enrichissement des données extraites</div>
                                </div>
                            </div>
                            
                            <div class="ai-step-item" data-step="4">
                                <div class="ai-step-indicator">
                                    <span class="ai-step-number">4</span>
                                    <svg class="ai-step-check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
                                        <path d="M20 6L9 17L4 12"/>
                                    </svg>
                                </div>
                                <div class="ai-step-content">
                                    <div class="ai-step-title">Synthèse intelligente</div>
                                    <div class="ai-step-description">Génération des recommandations et du rapport final</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="ai-progress-bar-wrapper">
                            <div class="ai-progress-bar">
                                <div class="ai-progress-bar-fill" style="width: 50%;"></div>
                            </div>
                        </div>
                        
                        <div class="ai-loader-footer">
                            Temps estimé: <span class="ai-time-remaining">15 secondes</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test 2: Message d'erreur -->
        <div class="test-section">
            <h2>2. Message d'erreur stylisé</h2>
            <div class="demo-wrapper">
                <div class="ai-error-container">
                    <div class="ai-error-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="15" y1="9" x2="9" y2="15"/>
                            <line x1="9" y1="9" x2="15" y2="15"/>
                        </svg>
                    </div>
                    <h3 style="font-size: 24px; font-weight: 700; color: #ef4444; margin: 0 0 0.75rem 0;">
                        Erreur d'analyse
                    </h3>
                    <p style="color: #6b7280; font-size: 16px; line-height: 1.6; margin-bottom: 2rem;">
                        Une erreur est survenue lors de l'analyse. Veuillez vérifier votre connexion et réessayer.
                    </p>
                    <button class="btn" style="
                        background: linear-gradient(135deg, #ef4444, #f87171);
                        color: white;
                        padding: 0.875rem 1.75rem;
                        border: none;
                        border-radius: 12px;
                        font-weight: 600;
                        font-size: 15px;
                        cursor: pointer;
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
                        display: inline-flex;
                        align-items: center;
                        gap: 0.5rem;
                    " 
                    onmouseover="this.style.transform='translateY(-2px) scale(1.02)'; this.style.boxShadow='0 6px 20px rgba(239, 68, 68, 0.4)'" 
                    onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 4px 12px rgba(239, 68, 68, 0.3)'">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6"/>
                            <path d="M1 20v-6h6"/>
                            <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                        </svg>
                        Réessayer l'analyse
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Test 3: Animation de progression -->
        <div class="test-section">
            <h2>3. Test d'animation de progression</h2>
            <div class="demo-wrapper">
                <button onclick="simulateProgress()" style="
                    background: linear-gradient(135deg, #2563eb, #7c3aed);
                    color: white;
                    padding: 1rem 2rem;
                    border: none;
                    border-radius: 12px;
                    font-weight: 600;
                    font-size: 16px;
                    cursor: pointer;
                    margin-bottom: 2rem;
                ">
                    Simuler la progression
                </button>
                
                <div id="progressDemo"></div>
            </div>
        </div>
    </div>
    
    <script>
        function simulateProgress() {
            const container = document.getElementById('progressDemo');
            container.innerHTML = document.querySelector('.ai-loader-container').outerHTML;
            
            const progressCircle = container.querySelector('.ai-progress-ring-fill');
            const progressPercentage = container.querySelector('.ai-progress-percentage');
            const progressBarFill = container.querySelector('.ai-progress-bar-fill');
            const steps = container.querySelectorAll('.ai-step-item');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                
                // Update circle
                const circumference = 314;
                const offset = circumference - (progress / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
                progressPercentage.textContent = `${progress}%`;
                
                // Update bar
                progressBarFill.style.width = `${progress}%`;
                
                // Update steps
                const currentStep = Math.ceil((progress / 100) * 4);
                steps.forEach((step, index) => {
                    if (index < currentStep - 1) {
                        step.classList.remove('active');
                        step.classList.add('completed');
                    } else if (index === currentStep - 1) {
                        step.classList.add('active');
                    }
                });
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        container.innerHTML = '<p style="text-align: center; font-size: 24px; color: #10b981; font-weight: 700;">✅ Analyse terminée!</p>';
                    }, 500);
                }
            }, 100);
        }
    </script>
</body>
</html>