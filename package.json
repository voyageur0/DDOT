{
  "name": "urban-ia",
  "version": "1.0.0",
  "description": "Application d'analyse intelligente de documents d'urbanisme - Backend Node.js unifié",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "vitest",
    "check": "node -e \"console.log('OpenAI:', !!process.env.OPENAI_API_KEY ? 'Configuré' : 'Manquant')\"",
    "ingest:pdf": "node scripts/ingest/ingest_regulation_pdf.js",
    "ingest:geo": "node scripts/ingest/ingest_regulation_geo.js",
    "db:reset": "supabase db reset",
    "db:migrate": "supabase db push",
    "db:types": "npm run gen:types",
    "gen:types": "supabase gen types typescript --project-id $SUPABASE_PROJECT_ID > src/db/types/supabase.ts",
    "migrate:data": "ts-node scripts/migration/move_normalized_to_model.ts",
    "ingest:psq": "ts-node scripts/ingest/ingest_psq_servitudes.ts",
    "ingest:paz": "ts-node scripts/ingest/ingest_paz_complements.ts",
    "ingest:rccz": "ts-node scripts/ingest/migrate_rccz_to_rules.ts",
    "ingest:cantonal": "ts-node scripts/ingest/ingest_cantonal_rules.ts",
    "ingest:all-rules": "npm run ingest:psq && npm run ingest:paz && npm run ingest:rccz && npm run ingest:cantonal",
    "test:engine": "vitest tests/engine/",
    "calc:parcel": "ts-node scripts/calc/calc_single_parcel.ts",
    "calc:batch": "ts-node scripts/calc/calc_all_parcels.ts",
    "ingest:opb": "ts-node scripts/ingest/context/import_opb_noise.ts",
    "ingest:ofac": "ts-node scripts/ingest/context/import_ofac_airport.ts",
    "ingest:risques": "ts-node scripts/ingest/context/import_risques_naturels.ts",
    "ingest:routes": "ts-node scripts/ingest/context/import_routes_cantonales.ts",
    "ingest:slope": "ts-node scripts/ingest/context/import_mnt_slope.ts",
    "ingest:context": "npm run ingest:opb && npm run ingest:ofac && npm run ingest:risques && npm run ingest:routes && npm run ingest:slope",
    "evidence:display": "node scripts/evidence/display-evidence.js",
    "evidence:report": "node scripts/evidence/quality-report.js",
    "evidence:clean": "node scripts/evidence/clean-evidence.js",
    "ingest:labels": "npm run labels:zones && npm run labels:constraints && npm run labels:fields",
    "labels:zones": "ts-node scripts/ingest/dictionary/import_zone_labels.ts",
    "labels:constraints": "ts-node scripts/ingest/dictionary/import_constraint_labels.ts",
    "labels:fields": "ts-node scripts/ingest/dictionary/import_field_labels.ts"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.51.0",
    "axios": "^1.10.0",
    "bcryptjs": "^2.4.3",
    "cheerio": "^1.0.0-rc.12",
    "cookie-parser": "^1.4.7",
    "cors": "^2.8.5",
    "csrf": "^3.1.0",
    "dotenv": "^16.3.1",
    "ejs": "^3.1.9",
    "express": "^4.18.2",
    "express-ejs-layouts": "^2.5.1",
    "express-rate-limit": "^7.5.1",
    "express-session": "^1.17.3",
    "express-validator": "^7.0.1",
    "helmet": "^8.1.0",
    "jsonwebtoken": "^9.0.2",
    "multer": "^1.4.5-lts.1",
    "node-cache": "^5.1.2",
    "node-fetch": "^3.3.2",
    "openai": "^4.24.1",
    "passport": "^0.7.0",
    "passport-local": "^1.0.0",
    "pdf-parse": "^1.1.1",
    "pg": "^8.16.3",
    "sequelize": "^6.35.2",
    "sqlite3": "^5.1.6",
    "stripe": "^14.10.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.8.3",
    "uuid": "^9.0.1",
    "winston": "^3.11.0",
    "node-tesseract-ocr": "^2.2.1",
    "pdf-img-convert": "^1.2.1",
    "wellknown": "^0.5.0",
    "pino": "^8.16.2",
    "pino-pretty": "^10.2.3"
  },
  "devDependencies": {
    "@types/cheerio": "^0.22.30",
    "@types/cors": "^2.8.19",
    "@types/express": "^5.0.3",
    "@types/node": "^20.10.5",
    "nodemon": "^3.0.2",
    "vitest": "^1.0.0"
  },
  "engines": {
    "node": ">=18.0.0"
  }
}
